<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8">
  <title>üìò ‡§õ‡§æ‡§§‡•ç‡§∞ ‡§ï‡•ç‡§µ‡§ø‡§ú‡§º ‡§™‡•à‡§®‡§≤</title>
  <style>
    /* ‡§Ü‡§™‡§ï‡•Ä CSS ‡§∏‡•ç‡§ü‡§æ‡§á‡§≤‡§ø‡§Ç‡§ó ‡§Ø‡§π‡§æ‡§Å ‡§π‡•ã‡§ó‡•Ä */
    body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  background: linear-gradient(to right, #e0f7fa, #fff);
  margin: 0;
  padding: 0;
}

.container {
  max-width: 800px;
  margin: 40px auto;
  padding: 30px;
  background-color: #ffffff;
  border-radius: 12px;
  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
}

h1, h2 {
  text-align: center;
  color: #00796b;
  margin-bottom: 20px;
}

.section {
  margin-bottom: 30px;
}

input[type="text"],
input[type="password"],
textarea {
  width: 100%;
  padding: 12px;
  margin: 8px 0 16px 0;
  border: 1px solid #b0bec5;
  border-radius: 6px;
  box-sizing: border-box;
  font-size: 16px;
}

button {
  background-color: #00796b;
  color: white;
  padding: 12px 20px;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  font-size: 16px;
  transition: background-color 0.3s ease;
}

button:hover {
  background-color: #004d40;
}

.question-block {
  margin-bottom: 25px;
  padding: 15px;
  background-color: #f1f8e9;
  border-left: 5px solid #c5e1a5;
  border-radius: 6px;
}

.question-block p {
  margin-bottom: 10px;
  font-weight: bold;
}

label {
  display: block;
  margin-bottom: 8px;
  cursor: pointer;
}

#scoreDisplay p {
  margin: 6px 0;
  font-size: 16px;
}

#messagesBox {
  max-height: 200px;
  overflow-y: auto;
  background-color: #e0f2f1;
  padding: 10px;
  border-radius: 6px;
  margin-bottom: 10px;
}

#messagesBox p {
  margin: 8px 0;
}

textarea {
  resize: vertical;
  min-height: 80px;
}

@media (max-width: 600px) {
  .container {
    padding: 20px;
  }

  button {
    width: 100%;
  }
}

  </style>
</head>
<body>
  <div class="container">
    <h1>üìò ‡§õ‡§æ‡§§‡•ç‡§∞ ‡§ï‡•ç‡§µ‡§ø‡§ú‡§º ‡§™‡•à‡§®‡§≤</h1>

    <!-- ‡§™‡§Ç‡§ú‡•Ä‡§ï‡§∞‡§£ ‡§Ö‡§®‡•Å‡§≠‡§æ‡§ó -->
    <div class="section" id="registerSection">
      <h2>‡§ñ‡§æ‡§§‡§æ ‡§¨‡§®‡§æ‡§è‡§Ç</h2>
      <input type="text" id="regName" placeholder="‡§Ö‡§™‡§®‡§æ ‡§®‡§æ‡§Æ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç" />
      <input type="password" id="regPassword" placeholder="‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° ‡§¨‡§®‡§æ‡§è‡§Ç" />
      <button onclick="register()">‡§™‡§Ç‡§ú‡•Ä‡§ï‡§∞‡§£ ‡§ï‡§∞‡•á‡§Ç</button>
    </div>

    <!-- ‡§≤‡•â‡§ó‡§ø‡§® ‡§Ö‡§®‡•Å‡§≠‡§æ‡§ó -->
    <div class="section" id="loginSection">
      <h2>‡§≤‡•â‡§ó‡§ø‡§®</h2>
      <input type="text" id="studentNameInput" placeholder="‡§Ö‡§™‡§®‡§æ ‡§®‡§æ‡§Æ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç" />
      <input type="password" id="studentPasswordInput" placeholder="‡§Ö‡§™‡§®‡§æ ‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç" />
      <button onclick="login()">‡§≤‡•â‡§ó‡§ø‡§® ‡§ï‡§∞‡•á‡§Ç</button>
    </div>

    <!-- ‡§ï‡•ç‡§µ‡§ø‡§ú‡§º ‡§Ö‡§®‡•Å‡§≠‡§æ‡§ó -->
    <div class="section" id="quizSection" style="display:none;">
      <h2>‡§ï‡•ç‡§µ‡§ø‡§ú‡§º ‡§™‡•ç‡§∞‡§Ø‡§æ‡§∏ ‡§ï‡§∞‡•á‡§Ç</h2>
      <form id="quizForm"></form>
      <button onclick="submitQuiz()">‡§ï‡•ç‡§µ‡§ø‡§ú‡§º ‡§∏‡§¨‡§Æ‡§ø‡§ü ‡§ï‡§∞‡•á‡§Ç</button>
    </div>

    <!-- ‡§∏‡•ç‡§ï‡•ã‡§∞ ‡§Ö‡§®‡•Å‡§≠‡§æ‡§ó -->
    <div class="section" id="scoreSection" style="display:none;">
      <h2>‡§Ü‡§™‡§ï‡§æ ‡§∏‡•ç‡§ï‡•ã‡§∞‡§ï‡§æ‡§∞‡•ç‡§°</h2>
      <div id="scoreDisplay"></div>
    </div>

    <!-- ‡§∏‡§Ç‡§¶‡•á‡§∂ ‡§Ö‡§®‡•Å‡§≠‡§æ‡§ó -->
    <div class="section" id="messageSection" style="display:none;">
      <h2>‡§∏‡§Ç‡§¶‡•á‡§∂</h2>
      <div id="messagesBox"></div>
      <textarea id="studentMessage" placeholder="‡§Ö‡§™‡§®‡§æ ‡§∏‡§Ç‡§¶‡•á‡§∂ ‡§≤‡§ø‡§ñ‡•á‡§Ç..."></textarea>
      <button onclick="sendMessage()">‡§≠‡•á‡§ú‡•á‡§Ç</button>
    </div>
  </div>

<script>
let currentStudent = null;

const loadData = (key, def) => JSON.parse(localStorage.getItem(key)) || def;
const saveData = (key, val) => localStorage.setItem(key, JSON.stringify(val));

let registeredStudents = loadData('registeredStudents', []);

function register() {
  const name = document.getElementById("regName").value.trim();
  const password = document.getElementById("regPassword").value.trim();
  if (!name || !password) return alert("‡§ï‡•É‡§™‡§Ø‡§æ ‡§®‡§æ‡§Æ ‡§î‡§∞ ‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç");

  const exists = registeredStudents.find(s => s.name === name);
  if (exists) return alert("‡§Ø‡§π ‡§®‡§æ‡§Æ ‡§™‡§π‡§≤‡•á ‡§∏‡•á ‡§Æ‡•å‡§ú‡•Ç‡§¶ ‡§π‡•à‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§è‡§ï ‡§Ö‡§≤‡§ó ‡§®‡§æ‡§Æ ‡§Ü‡§ú‡§º‡§Æ‡§æ‡§è‡§Ç‡•§");

  registeredStudents.push({ name, password });
  saveData('registeredStudents', registeredStudents);
  alert("‡§™‡§Ç‡§ú‡•Ä‡§ï‡§∞‡§£ ‡§∏‡§´‡§≤! ‡§Ö‡§¨ ‡§Ü‡§™ ‡§≤‡•â‡§ó‡§ø‡§® ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§");
  document.getElementById("regName").value = "";
  document.getElementById("regPassword").value = "";
}

function login() {
  const name = document.getElementById('studentNameInput').value.trim();
  const password = document.getElementById('studentPasswordInput').value.trim();

  if (!name || !password) return alert("‡§ï‡•É‡§™‡§Ø‡§æ ‡§®‡§æ‡§Æ ‡§î‡§∞ ‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç");

  const student = registeredStudents.find(s => s.name === name && s.password === password);

  if (!student) return alert("‡§Ö‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§®‡§æ‡§Æ ‡§Ø‡§æ ‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§°!");

  currentStudent = name;
  document.getElementById("loginSection").style.display = "none";
  document.getElementById("registerSection").style.display = "none";
  document.getElementById("quizSection").style.display = "block";
  document.getElementById("scoreSection").style.display = "block";
  document.getElementById("messageSection").style.display = "block";

  loadQuiz();
  renderScore();
  renderMessages();
}

function loadQuiz() {
  fetch('questions.json')
    .then(response => {
      if (!response.ok) {
        throw new Error('‡§®‡•á‡§ü‡§µ‡§∞‡•ç‡§ï ‡§™‡•ç‡§∞‡§§‡§ø‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ ‡§†‡•Ä‡§ï ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à');
      }
      return response.json();
    })
    .then(data => {
      const quiz = data;
      saveData("quizQuestions", quiz);
      const form = document.getElementById("quizForm");
      form.innerHTML = "";

      quiz.forEach((q, i) => {
        const block = document.createElement("div");
        block.className = "question-block";
        block.innerHTML = `
          <p><strong>‡§™‡•ç‡§∞‡§∂‡•ç‡§® ${i + 1}: ${q.question}</strong></p>
          ${q.options.map((option, index) => `
            <label><input type="radio" name="q${i}" value="${option}"> ${option}</label><br>
          `).join('')}
        `;
        form.appendChild(block);
      });
    })
    .catch(error => {
      console.error('‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§≤‡•ã‡§° ‡§ï‡§∞‡§®‡•á ‡§Æ‡•á‡§Ç ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø:', error);
    });
}

function submitQuiz() {
  const quiz = loadData("quizQuestions", []);
  let score = 0;
  quiz.forEach((q, i) => {
    const val = document.querySelector(`input[name=q${i}]:checked`);
    if (val && val.value === q.answer) score++;
  });
  const result = { studentName: currentStudent, score, date: new Date().toISOString() };
  const results = loadData("studentResults", []);
  results.push(result);
  saveData("studentResults", results);
  alert(`‡§ï‡•ç‡§µ‡§ø‡§ú‡§º ‡§∏‡§¨‡§Æ‡§ø‡§ü ‡§ï‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ! ‡§Ü‡§™‡§ï‡§æ ‡§∏‡•ç‡§ï‡•ã‡§∞ ‡§π‡•à ${score}/${quiz.length}`);
  renderScore();
}

function renderScore() {
  const results = loadData("studentResults", []);
  const r = results.filter(r => r.studentName === currentStudent).pop();
  if (!r) return;
  document.getElementById("scoreDisplay").innerHTML = `
    <p><strong>‡§®‡§æ‡§Æ:</strong> ${r.studentName}</p>
    <p><strong>‡§∏‡•ç‡§ï‡•ã‡§∞:</strong> ${r.score}/${loadData("quizQuestions", []).length}</p>
    <p><strong>‡§§‡§æ‡§∞‡•Ä‡§ñ:</strong> ${new Date(r.date).toLocaleString()}</p>
  `;
}

function renderMessages() {
  const messages = loadData("messages", []);
  const filtered = messages.filter(m => m.receiver === currentStudent || m.receiver === "All");
  document.getElementById("messagesBox").innerHTML = filtered.map(m =>
    `<p><strong>${m.sender}:</strong> ${m.content} <small>(${m.timestamp})</small></p>`
  ).join('');
}

function sendMessage() {
  const msg = document.getElementById("studentMessage").value.trim();
  if (!msg) return alert("‡§∏‡§Ç‡§¶‡•á‡§∂ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç!");
  const messages = loadData("messages", []);
  messages.push({ sender: currentStudent, receiver: "Admin", content: msg, timestamp: new Date().toLocaleString() });
  saveData("messages", messages);
  document.getElementById("studentMessage").value = "";
  renderMessages();
}
</script>
</body>
</html>
